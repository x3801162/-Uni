{"version":3,"file":"count-down.js","sources":["../../src/count-down/count-down.tsx"],"sourcesContent":["import { computed, defineComponent, onBeforeUnmount, onMounted, ref } from 'vue';\nimport config from '../config';\nimport CountDownProps from './props';\nimport { useCountDown } from '../shared/useCountDown';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass } from '../hooks/useClass';\n\nconst { prefix } = config;\n\nexport default defineComponent({\n  name: `${prefix}-count-down`,\n  props: CountDownProps,\n  setup(props) {\n    const renderTNodeJSX = useTNodeJSX();\n    const countDownClass = usePrefixClass('count-down');\n    const countDownClasses = computed(() => [\n      countDownClass.value,\n      `${countDownClass.value}--${props.theme}`,\n      `${countDownClass.value}--${props.size}`,\n    ]);\n    const visibility = ref(true);\n    const visibilitychangeListener = () => {\n      visibility.value = !document.hidden;\n    };\n    onMounted(() => {\n      document.addEventListener('visibilitychange', visibilitychangeListener, false);\n    });\n    onBeforeUnmount(() => {\n      document.removeEventListener('visibilitychange', visibilitychangeListener, false);\n    });\n    const { showTimes } = useCountDown(props, visibility);\n    return () => {\n      const renderContent = () => {\n        const content = renderTNodeJSX('content');\n\n        if (content !== 'default' && content) {\n          return content;\n        }\n\n        return showTimes.map((item) => {\n          return (\n            <>\n              <span class={`${countDownClass.value}__item`}>{item.value}</span>\n              {item.mark && (\n                <span\n                  class={[\n                    `${countDownClass.value}__split`,\n                    `${countDownClass.value}__split--${props.splitWithUnit ? 'text' : 'dot'}`,\n                  ]}\n                >\n                  {item.mark}\n                </span>\n              )}\n            </>\n          );\n        });\n      };\n      return <div class={countDownClasses.value}>{renderContent()}</div>;\n    };\n  },\n});\n"],"names":["prefix","config","defineComponent","name","props","CountDownProps","setup","renderTNodeJSX","useTNodeJSX","countDownClass","usePrefixClass","countDownClasses","computed","value","concat","theme","size","visibility","ref","visibilitychangeListener","document","hidden","onMounted","addEventListener","onBeforeUnmount","removeEventListener","_useCountDown","useCountDown","showTimes","renderContent","content","map","item","_createVNode","_Fragment","mark","splitWithUnit"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,IAAQA,SAAWC,MAAA,CAAXD;AAER,iBAAeE,eAAgB,CAAA;AAC7BC,EAAAA,gBAASH,MAAA,EAAA,aAAA,CAAA;AACTI,EAAAA,KAAO,EAAAC,cAAA;AACPC,EAAAA,OAAAA,SAAAA,MAAMF,KAAO,EAAA;AACX,IAAA,IAAMG,iBAAiBC,WAAY,EAAA,CAAA;AAC7B,IAAA,IAAAC,cAAA,GAAiBC,eAAe,YAAY,CAAA,CAAA;IAC5C,IAAAC,gBAAA,GAAmBC,SAAS,YAAA;AAAA,MAAA,OAAM,CACtCH,cAAe,CAAAI,KAAA,EAAAC,EAAAA,CAAAA,MAAA,CACZL,cAAe,CAAAI,KAAA,EAAAC,IAAAA,CAAAA,CAAAA,MAAA,CAAUV,KAAM,CAAAW,KAAA,CAAAD,EAAAA,EAAAA,CAAAA,MAAA,CAC/BL,cAAe,CAAAI,KAAA,EAAAC,IAAAA,CAAAA,CAAAA,MAAA,CAAUV,KAAM,CAAAY,IAAA,CACnC,CAAA,CAAA;KAAA,CAAA,CAAA;AACK,IAAA,IAAAC,UAAA,GAAaC,IAAI,IAAI,CAAA,CAAA;AAC3B,IAAA,IAAMC,2BAA2B,SAA3BA,2BAAiC;AAC1BF,MAAAA,UAAA,CAAAJ,KAAA,GAAQ,CAACO,QAAS,CAAAC,MAAA,CAAA;KAC/B,CAAA;AACAC,IAAAA,SAAA,CAAU,YAAM;MACLF,QAAA,CAAAG,gBAAA,CAAiB,kBAAoB,EAAAJ,wBAAA,EAA0B,KAAK,CAAA,CAAA;AAC/E,KAAC,CAAA,CAAA;AACDK,IAAAA,eAAA,CAAgB,YAAM;MACXJ,QAAA,CAAAK,mBAAA,CAAoB,kBAAoB,EAAAN,wBAAA,EAA0B,KAAK,CAAA,CAAA;AAClF,KAAC,CAAA,CAAA;AACD,IAAA,IAAAO,aAAA,GAAsBC,YAAA,CAAavB,OAAOa,UAAU,CAAA;MAA5CW,SAAA,GAAAF,aAAA,CAAAE,SAAA,CAAA;AACR,IAAA,OAAO,YAAM;AACX,MAAA,IAAMC,gBAAgB,SAAhBA,gBAAsB;AACpB,QAAA,IAAAC,OAAA,GAAUvB,eAAe,SAAS,CAAA,CAAA;AAEpC,QAAA,IAAAuB,OAAA,KAAY,aAAaA,OAAS,EAAA;AAC7B,UAAA,OAAAA,OAAA,CAAA;AACT,SAAA;AAEO,QAAA,OAAAF,SAAA,CAAUG,GAAI,CAAA,UAACC,IAAS,EAAA;AAE3B,UAAA,OAAAC,WAAA,CAAAC,QAAA,EAAA,IAAA,EAAA,CAAAD,WAAA,CAAA,MAAA,EAAA;AAAA,YAAA,OAAA,EAAA,EAAA,CAAAnB,MAAA,CACkBL,eAAeI,KAAgB,EAAA,QAAA,CAAA;WAAAmB,EAAAA,CAAAA,IAAA,CAAKnB,SACnDmB,IAAK,CAAAG,IAAA,IAAAF,WAAA,CAAA,MAAA,EAAA;YAAA,OAEK,EAAA,CAAA,EAAA,CAAAnB,MAAA,CACFL,cAAe,CAAAI,KAAA,EAAA,SAAA,CAAA,EAAA,EAAA,CAAAC,MAAA,CACfL,cAAA,CAAeI,KAAiB,EAAA,WAAA,CAAA,CAAAC,MAAA,CAAAV,KAAA,CAAMgC,gBAAgB,MAAS,GAAA,KAAA,CAAA,CAAA;WAGnEJ,EAAAA,CAAAA,IAAK,CAAAG,IAAA,CANP,CAAA,CAAA,CAAA,CAAA;AAWT,SAAC,CAAA,CAAA;OACH,CAAA;AACA,MAAA,OAAAF,WAAA,CAAA,KAAA,EAAA;AAAA,QAAA,OAAA,EAAmBtB,iBAAiBE,KAAAA;OAAQgB,EAAAA,CAAAA,aAAA;KAC9C,CAAA;AACF,GAAA;AACF,CAAC,CAAA;;;;"}