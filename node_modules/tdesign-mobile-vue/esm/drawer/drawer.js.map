{"version":3,"file":"drawer.js","sources":["../../src/drawer/drawer.tsx"],"sourcesContent":["import { ref, watch, toRefs, defineComponent, h } from 'vue';\nimport TPopup from '../popup';\nimport config from '../config';\nimport props from './props';\nimport { DrawerItem } from './type';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass } from '../hooks/useClass';\n\nconst { prefix } = config;\n\nexport default defineComponent({\n  name: `${prefix}-drawer`,\n  props,\n  emits: ['update:visible', 'itemClick', 'overlayClick'],\n  setup(props, context) {\n    const renderTNodeJSX = useTNodeJSX();\n    const drawerClass = usePrefixClass('drawer');\n    const { visible, showOverlay } = toRefs(props);\n    const open = ref(visible.value || false);\n\n    watch(open, () => {\n      context.emit('update:visible', open.value);\n    });\n\n    watch(visible, () => {\n      open.value = visible.value;\n    });\n\n    const onItemClick = (index: number, item: DrawerItem, context: { e: MouseEvent }) => {\n      props.onItemClick?.(index, item, context);\n    };\n\n    const onVisibleChange = (visible: boolean) => {\n      if (showOverlay.value) {\n        props.onOverlayClick?.({ visible });\n      }\n    };\n\n    const onClose = () => {\n      props.onClose?.('overlay');\n    };\n\n    return () => {\n      const { attach, zIndex, closeOnOverlayClick, destroyOnClose, items, placement, showOverlay, overlayProps } =\n        props;\n      const renderTitleNode = () => {\n        const titleNode = renderTNodeJSX('title');\n        if (!titleNode) {\n          return null;\n        }\n        return <div class={`${drawerClass.value}__title`}>{titleNode}</div>;\n      };\n      const renderFooterNode = () => {\n        const footerNode = renderTNodeJSX('footer');\n        if (!footerNode) {\n          return null;\n        }\n        return <div class={`${drawerClass.value}__footer`}>{footerNode}</div>;\n      };\n      return (\n        <TPopup\n          v-model={open.value}\n          placement={placement}\n          attach={attach}\n          showOverlay={showOverlay}\n          overlayProps={overlayProps}\n          zIndex={zIndex}\n          closeOnOverlayClick={closeOnOverlayClick}\n          destroyOnClose={destroyOnClose}\n          onVisibleChange={onVisibleChange}\n          onClose={onClose}\n        >\n          <div class={`${drawerClass.value}`}>\n            {renderTitleNode()}\n            {renderTNodeJSX('default')}\n\n            <div class={`${drawerClass.value}__sidebar`}>\n              {(items || []).map((item, index) => (\n                <div\n                  key={item.title}\n                  class={`${drawerClass.value}__sidebar-item`}\n                  onClick={(e) => onItemClick(index, item, { e })}\n                >\n                  {item.icon && <span class={`${drawerClass.value}__sidebar-item-icon`}>{item.icon(h)}</span>}\n                  <div class={`${drawerClass.value}__sidebar-item-title`}>{item.title}</div>\n                </div>\n              ))}\n            </div>\n\n            {renderFooterNode()}\n          </div>\n        </TPopup>\n      );\n    };\n  },\n});\n"],"names":["prefix","config","defineComponent","name","props","emits","setup","context","renderTNodeJSX","useTNodeJSX","drawerClass","usePrefixClass","_toRefs","toRefs","visible","showOverlay","open","ref","value","watch","emit","onItemClick","index","item","_props2$onItemClick","onVisibleChange","_props2$onOverlayClic","onOverlayClick","onClose","_props2$onClose","attach","zIndex","closeOnOverlayClick","destroyOnClose","items","placement","overlayProps","renderTitleNode","titleNode","_createVNode","concat","renderFooterNode","footerNode","TPopup","onUpdateModelValue","$event","default","_default","map","title","onClick","e","icon","h"],"mappings":"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"}