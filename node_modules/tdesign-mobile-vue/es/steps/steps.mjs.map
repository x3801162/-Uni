{"version":3,"file":"steps.mjs","sources":["../../src/steps/steps.tsx"],"sourcesContent":["import { provide, defineComponent, reactive, ComponentInternalInstance, computed, toRefs } from 'vue';\nimport props from './props';\nimport config from '../config';\nimport { TdStepsProps } from './type';\nimport useVModel from '../hooks/useVModel';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass } from '../hooks/useClass';\n\nconst { prefix } = config;\n\nexport default defineComponent({\n  name: `${prefix}-steps`,\n  props,\n  emits: ['update:current', 'update:modelValue', 'change'],\n  setup(props, context) {\n    const stepsClass = usePrefixClass('steps');\n    const baseClass = computed(() => [\n      stepsClass.value,\n      `${stepsClass.value}--${props.layout}`,\n      `${stepsClass.value}--${props.sequence}`,\n      { [`${stepsClass.value}--readonly`]: props.readonly },\n    ]);\n    const renderTNodeJSX = useTNodeJSX();\n\n    const { current, modelValue } = toRefs(props);\n    const [innerCurrent, setInnerCurrent] = useVModel(\n      current,\n      modelValue,\n      props.defaultCurrent,\n      props.onChange,\n      'current',\n    );\n\n    interface TState {\n      children: ComponentInternalInstance[];\n    }\n\n    const state: TState = reactive({\n      children: [],\n    });\n\n    const relation = (child: ComponentInternalInstance) => {\n      child && state.children.push(child);\n    };\n\n    const removeRelation = (child: ComponentInternalInstance) => {\n      state.children = state.children.filter((item) => item !== child);\n    };\n\n    const onClickItem = (cur: TdStepsProps['current'], prev: TdStepsProps['current'], e: MouseEvent) => {\n      setInnerCurrent(cur, prev, { e });\n    };\n\n    provide('stepsProvide', {\n      ...props,\n      state,\n      current: innerCurrent,\n      relation,\n      removeRelation,\n      onClickItem,\n    });\n\n    return () => {\n      const renderContent = renderTNodeJSX('default') || null;\n      return <div class={baseClass.value}>{renderContent}</div>;\n    };\n  },\n});\n"],"names":["prefix","config","defineComponent","name","props","emits","setup","context","stepsClass","usePrefixClass","baseClass","computed","value","concat","layout","sequence","_defineProperty","readonly","renderTNodeJSX","useTNodeJSX","_toRefs","toRefs","current","modelValue","_useVModel","useVModel","defaultCurrent","onChange","_useVModel2","_slicedToArray","innerCurrent","setInnerCurrent","state","reactive","children","relation","child","push","removeRelation","filter","item","onClickItem","cur","prev","e","provide","_objectSpread","renderContent","_createVNode"],"mappings":"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"}