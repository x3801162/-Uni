{"version":3,"file":"getSystemInfoSync.js","sources":["uni_modules/vk-uview-ui/libs/function/getSystemInfoSync.js"],"sourcesContent":["/**\r\n * getSystemInfoSync的优化版本（在微信小程序不会提示API已过期的警告）\r\n */\r\n\r\nfunction getSystemInfoSync() {\r\n\t// #ifdef MP-WEIXIN\r\n\treturn getCompatibleSystemInfo();\r\n\t// #endif\r\n\t// #ifndef MP-WEIXIN\r\n\treturn uni.getSystemInfoSync();\r\n\t// #endif\r\n}\r\n\r\nexport default getSystemInfoSync;\r\n\r\n// #ifdef MP-WEIXIN\r\nfunction getCompatibleSystemInfo() {\r\n\tif (wx.canIUse('getDeviceInfo') && wx.canIUse('getWindowInfo') && wx.canIUse('getAppBaseInfo') && wx.canIUse('getSystemSetting')) {\r\n\t\tconst deviceInfo = uni.getDeviceInfo();\r\n\t\tconst windowInfo = uni.getWindowInfo();\r\n\t\tconst appBaseInfo = uni.getAppBaseInfo();\r\n\t\tconst systemSetting = uni.getSystemSetting();\r\n\t\t// const appAuthorizeSetting = wx.getAppAuthorizeSetting(); // 这个API效率低，不放在这里了\r\n\t\t// 最终会少 batteryLevel 属性和 appAuthorizeSetting 属性\r\n\t\treturn {\r\n\t\t\tdevicePixelRatio: windowInfo.pixelRatio,\r\n\t\t\thostFontSizeSetting: appBaseInfo.fontSizeSetting,\r\n\t\t\tbatteryLevel: 100, // 设置一个假的固定值进去，防止出错（如果再调用电量API这效率会比较低）\r\n\t\t\t...deviceInfo,\r\n\t\t\t...windowInfo,\r\n\t\t\t...appBaseInfo,\r\n\t\t\t...systemSetting,\r\n\t\t\t// ...appAuthorizeSetting,\r\n\t\t};\r\n\t} else {\r\n\t\treturn uni.getSystemInfoSync();\r\n\t}\r\n}\r\n// #endif"],"names":["wx","uni"],"mappings":";;AAIA,SAAS,oBAAoB;AAE5B,SAAO,wBAAuB;AAK/B;AAKA,SAAS,0BAA0B;AAClC,MAAIA,cAAAA,KAAG,QAAQ,eAAe,KAAKA,cAAE,KAAC,QAAQ,eAAe,KAAKA,cAAAA,KAAG,QAAQ,gBAAgB,KAAKA,cAAE,KAAC,QAAQ,kBAAkB,GAAG;AACjI,UAAM,aAAaC,oBAAI;AACvB,UAAM,aAAaA,oBAAI;AACvB,UAAM,cAAcA,oBAAI;AACxB,UAAM,gBAAgBA,oBAAI;AAG1B,WAAO;AAAA,MACN,kBAAkB,WAAW;AAAA,MAC7B,qBAAqB,YAAY;AAAA,MACjC,cAAc;AAAA;AAAA,MACd,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA;AAAA,IAEN;AAAA,EACA,OAAQ;AACN,WAAOA,cAAAA,MAAI;EACX;AACF;;"}