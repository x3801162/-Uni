{"version":3,"file":"onLaunchMethods.js","sources":["utils/onLaunchMethods.js"],"sourcesContent":["import { request_noToken } from \"@/utils/request/index\";\r\nimport API from \"@/config/api\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n    async onLaunchMethods() {\r\n        // 获取基本信息\r\n        try {\r\n            const res = await request_noToken(API.GetOpenList, {}, \"GET\");\r\n            const result = res?.data;\r\n\r\n            if (res?.code === 200) { \r\n                uni.setStorageSync(\"is_examine\", result?.is_examine ?? false);\r\n                uni.setStorageSync(\"is_force\", result?.is_force ?? false);\r\n                uni.setStorageSync(\"visit_time\", result?.visit_time ? JSON.stringify(result.visit_time) : \"\");\r\n\r\n                // 存入医生列表\r\n                store.commit(\"SETDOCTORLIST\", result?.doctor ?? []);\r\n\r\n                // 存入banner列表（优化处理逻辑，移除无效的flatMap）\r\n                const bannerList = result?.subject\r\n                    ?.filter((v) => v.index_options === 0)\r\n                    ?.sort((a, b) => a.order - b.order)\r\n                    ?? [];\r\n                store.commit(\"SETBANNERLIST\", bannerList);\r\n\r\n                // 菜单列表赋值\r\n                store.commit(\"SETMENULIST\", result?.menu ?? []);\r\n\r\n                // 存入公告\r\n                store.commit(\"SETNOTICE\", result?.notice ?? []);\r\n\r\n                // 存入分类\r\n                const categoriesList = result?.subject\r\n                    ?.filter((v) => v.index_options === 3)\r\n                    ?.sort((a, b) => a.order - b.order)\r\n                    ?? [];\r\n                store.commit(\"SETCATEGORIES\", categoriesList);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"获取基础信息失败:\", error);\r\n            // 可以考虑添加用户友好的错误提示\r\n            // uni.showToast({ title: '网络请求失败', icon: 'none' });\r\n        }\r\n    },\r\n}"],"names":["request_noToken","API","uni","store"],"mappings":";;;;;AAIA,MAAe,kBAAA;AAAA,EACX,MAAM,kBAAkB;;AAEpB,QAAI;AACA,YAAM,MAAM,MAAMA,oCAAgBC,WAAAA,IAAI,aAAa,CAAA,GAAI,KAAK;AAC5D,YAAM,SAAS,2BAAK;AAEpB,WAAI,2BAAK,UAAS,KAAK;AACnBC,sBAAG,MAAC,eAAe,eAAc,iCAAQ,eAAc,KAAK;AAC5DA,sBAAG,MAAC,eAAe,aAAY,iCAAQ,aAAY,KAAK;AACxDA,sBAAAA,MAAI,eAAe,eAAc,iCAAQ,cAAa,KAAK,UAAU,OAAO,UAAU,IAAI,EAAE;AAG5FC,oBAAK,MAAC,OAAO,kBAAiB,iCAAQ,WAAU,CAAE,CAAA;AAGlD,cAAM,eAAa,4CAAQ,YAAR,mBACb,OAAO,CAAC,MAAM,EAAE,kBAAkB,OADrB,mBAEb,KAAK,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,WAC1B;AACPA,oBAAAA,MAAM,OAAO,iBAAiB,UAAU;AAGxCA,oBAAK,MAAC,OAAO,gBAAe,iCAAQ,SAAQ,CAAE,CAAA;AAG9CA,oBAAK,MAAC,OAAO,cAAa,iCAAQ,WAAU,CAAE,CAAA;AAG9C,cAAM,mBAAiB,4CAAQ,YAAR,mBACjB,OAAO,CAAC,MAAM,EAAE,kBAAkB,OADjB,mBAEjB,KAAK,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,WAC1B;AACPA,oBAAAA,MAAM,OAAO,iBAAiB,cAAc;AAAA,MAC/C;AAAA,IACJ,SAAQ,OAAO;AACZD,oBAAc,MAAA,MAAA,SAAA,kCAAA,aAAa,KAAK;AAAA,IAGnC;AAAA,EACJ;AACL;;"}