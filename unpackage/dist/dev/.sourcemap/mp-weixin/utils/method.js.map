{"version":3,"file":"method.js","sources":["utils/method.js"],"sourcesContent":["// 反时间 {day: 18 hour: 10 minute: 59 mmmmyydd: \"2024-07-18\" month: \"07\" second: 17 time: \"2024-07-18 10:59:17\" year: 2024}\r\nexport function timeExChange() {\r\n\r\n  // 获取时间\r\n  var date = new Date();\r\n  //年 getFullYear()：四位数字返回年份\r\n  var year = date.getFullYear(); //getFullYear()代替getYear()\r\n  //月 getMonth()：0 ~ 11\r\n  var month = date.getMonth() + 1;\r\n  //日 getDate()：(1 ~ 31)\r\n  var day = date.getDate();\r\n  var next = date.getDate();\r\n  next = next + 1\r\n  //时 getHours()：(0 ~ 23)\r\n  var hour = date.getHours();\r\n  //分 getMinutes()： (0 ~ 59)\r\n  var minute = date.getMinutes() - 0;\r\n\r\n\r\n  //秒 getSeconds()：(0 ~ 59)\r\n  var second = date.getSeconds();\r\n  if (month < 10) {\r\n    month = `0${month}`\r\n  }\r\n  if (day < 10) {\r\n    day = `0${day}`\r\n  }\r\n  if (next < 10) {\r\n    next = `0${next}`\r\n  }\r\n\r\n  if (minute < 10) {\r\n    minute = `0${minute}`\r\n  }\r\n\r\n  var time = year + '-' + month + '-' + addZero(day) + ' ' + addZero(hour) + ':' + addZero(minute) + ':' + addZero(\r\n    second);\r\n  var mmmmyydd = year + '-' + month + '-' + day\r\n\r\n\r\n  var nextday = year + '-' + month + '-' + next\r\n\r\n  let GMT = {\r\n    year,\r\n    month,\r\n    day,\r\n    hour,\r\n    minute,\r\n    second,\r\n    time,\r\n    mmmmyydd,\r\n    nextday\r\n  }\r\n  return GMT\r\n}\r\n\r\nexport function addZero(s) {\r\n  return s < 10 ? ('0' + s) : s;\r\n}\r\n\r\n\r\n// 反时间戳或者yyyy-mm-dd反星期几\r\nexport function getDayOfWeek(input) {\r\n  const date = typeof input === 'string' ? new Date(input) : new Date(input * 1000);\r\n  const daysOfWeek = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];\r\n  const dayOfWeek = date.getDay();\r\n\r\n  return daysOfWeek[dayOfWeek];\r\n}\r\n\r\n// yyyy-mm-dd+1 日期加一\r\nexport function getNextDay(dateString, daysToAdd) {\r\n  const date = new Date(dateString);\r\n  date.setDate(date.getDate() + daysToAdd);\r\n\r\n  const year = date.getFullYear();\r\n  const month = (date.getMonth() + 1).toString().padStart(2, '0');\r\n  const day = date.getDate().toString().padStart(2, '0');\r\n\r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\n// 时间差\r\nexport function timeDifference(da1, da2) {\r\n  // 时间差\r\n  var date1 = new Date(da1);\r\n  var date2 = new Date(da2);\r\n  var Difference_In_Time = date2.getTime() - date1.getTime();\r\n  var Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);\r\n  return Difference_In_Days\r\n}\r\n\r\n// 将时间戳转换为 JavaScript Date 对象 yyyy-dd-mm hh:mm:ss\r\nexport function timestampToDate(timestamp, type) {\r\n\r\n  const date = new Date(timestamp * 1000);\r\n\r\n  // 创建一个对象来存储月份的名称\r\n  const monthNames = [\r\n    \"01\", \"02\", \"03\", \"04\", \"05\", \"06\",\r\n    \"07\", \"08\", \"09\", \"10\", \"11\", \"12\"\r\n  ];\r\n\r\n  // 获取年、月、日、小时、分钟和秒数\r\n  // 如果当天日期大于17.30分，则从第二天开始\r\n\r\n  const year = date.getFullYear();\r\n  var month = monthNames[date.getMonth()];\r\n  var day = date.getDate();\r\n\r\n  if (day <= 10) {\r\n    day = '0' + day\r\n  }\r\n\r\n  var hours = date.getHours();\r\n  var minutes = date.getMinutes();\r\n  var seconds = date.getSeconds();\r\n\r\n  if (minutes <= 10) {\r\n    minutes = '0' + minutes\r\n  }\r\n  if (seconds <= 10) {\r\n    seconds = '0' + seconds\r\n  }\r\n\r\n  if (hours >= 17 && minutes >= 30) {\r\n    day = day + 1\r\n  }\r\n\r\n  if (type == 'mmmmyyddhhmmss') {\r\n    // 使用字符串插值创建日期字符串\r\n    var dateString = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\r\n  }\r\n  if (type == 'mmmmyydd') {\r\n    // 使用字符串插值创建日期字符串\r\n    var dateString = `${year}-${month}-${day}`;\r\n  }\r\n\r\n  // 返回日期字符串\r\n  return dateString;\r\n}\r\n\r\nexport function getImage_url(image_url) {\r\n  const base_url = 'https://cd-1314234533.cos.ap-chengdu.myqcloud.com'\r\n  if (image_url) {\r\n    image_url = image_url.split(\",\");\r\n    image_url = image_url.map(v => base_url + v)\r\n    return image_url\r\n  } else {\r\n    return ''\r\n  }\r\n\r\n}\r\n\r\nexport function reg(tel) {\r\n  // 正则\r\n  let regRule = /^(?:(?:\\+86)?1[3-9]\\d{9}|0\\d{2,3}-?\\d{7,8})$/;\r\n  let flag = regRule.test(tel);\r\n  return flag\r\n}\r\n\r\nexport function getLogin() {\r\n  const is_force = wx.getStorageSync('is_force')\r\n\r\n\r\n\r\n  var turn = wx.getStorageSync('turn')\r\n  const is_examine = wx.getStorageSync('is_examine')\r\n\r\n  if (!is_examine) {\r\n    if (wx.getStorageSync('Yuyue')) {\r\n      turn = false\r\n    }\r\n    if (!wx.getStorageSync('token') && turn) {\r\n\r\n      wx.navigateTo({\r\n        url: `/pages/login/choose/index`,\r\n      })\r\n      wx.setStorageSync('turn', false)\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  return true\r\n\r\n\r\n}\r\n\r\nexport function goYuyue(item, navigate) {\r\n  const turn = wx.getStorageSync('turn')\r\n  wx.setStorageSync('Yuyue', true)\r\n  if (wx.getStorageSync('token')) {\r\n    wx.navigateTo({\r\n      url: navigate\r\n    })\r\n    return true\r\n  }\r\n  if (!turn) {\r\n    // 如果没有turn标记，跳转到登录页面\r\n    wx.navigateTo({\r\n      url: `/pages/login/choose/index?navigate=${encodeURIComponent(navigate)}`,\r\n    })\r\n    wx.setStorageSync('turn', true)\r\n    return false\r\n  } else {\r\n    // 如果有turn标记，直接跳转到预约页面\r\n\r\n    wx.navigateTo({\r\n      url: navigate\r\n    })\r\n    return true\r\n  }\r\n}\r\n\r\n\r\nexport function getPublic(that) {\r\n  // 公用颜色、是否审核、就诊时间\r\n  if (wx.getStorageSync('visit_time')) {\r\n    const visit_time = wx.getStorageSync('visit_time')\r\n    const is_examine = wx.getStorageSync('is_examine')\r\n    const color = wx.getStorageSync('color')\r\n    that.setData({\r\n      visit_time,\r\n      is_examine,\r\n      color\r\n    })\r\n  }\r\n}\r\n\r\nexport function getVisitTime() {\r\n  let visit_time = wx.getStorageSync('visit_time')\r\n\r\n\r\n  // 获取当前时间\r\n  const now = new Date();\r\n  const currentTimestamp = now.getTime();\r\n\r\n  // 将 visit_time.end_time 加上当天日期并转换为时间戳\r\n  let endTimeTimestamp = null;\r\n  if (visit_time && visit_time.end_time) {\r\n    const today = new Date();\r\n    const year = today.getFullYear();\r\n    const month = (today.getMonth() + 1).toString().padStart(2, '0');\r\n    const day = today.getDate().toString().padStart(2, '0');\r\n    const fullDateTime = `${year}-${month}-${day} ${visit_time.end_time}`;\r\n    endTimeTimestamp = new Date(fullDateTime).getTime();\r\n  }\r\n\r\n  // currentTimestamp 当前时间戳\r\n  // endTimeTimestamp 结束时间戳\r\n\r\n  // 检查当前时间是否超过结束时间\r\n  const isAfterEndTime = endTimeTimestamp ? currentTimestamp > endTimeTimestamp : false;\r\n  return {\r\n    isAfterEndTime\r\n  }\r\n}\r\n\r\n\r\nexport default {\r\n  timeExChange,\r\n  addZero,\r\n  getDayOfWeek,\r\n  getNextDay,\r\n  timestampToDate,\r\n  timeDifference,\r\n  getImage_url,\r\n  reg,\r\n  getLogin,\r\n  goYuyue,\r\n  getPublic,\r\n  getVisitTime,\r\n  // 其他方法...\r\n};\r\n\r\n\r\n"],"names":[],"mappings":";;AACO,SAAS,eAAe;AAG7B,MAAI,OAAO,oBAAI;AAEf,MAAI,OAAO,KAAK;AAEhB,MAAI,QAAQ,KAAK,SAAQ,IAAK;AAE9B,MAAI,MAAM,KAAK;AACf,MAAI,OAAO,KAAK;AAChB,SAAO,OAAO;AAEd,MAAI,OAAO,KAAK;AAEhB,MAAI,SAAS,KAAK,WAAU,IAAK;AAIjC,MAAI,SAAS,KAAK;AAClB,MAAI,QAAQ,IAAI;AACd,YAAQ,IAAI,KAAK;AAAA,EAClB;AACD,MAAI,MAAM,IAAI;AACZ,UAAM,IAAI,GAAG;AAAA,EACd;AACD,MAAI,OAAO,IAAI;AACb,WAAO,IAAI,IAAI;AAAA,EAChB;AAED,MAAI,SAAS,IAAI;AACf,aAAS,IAAI,MAAM;AAAA,EACpB;AAED,MAAI,OAAO,OAAO,MAAM,QAAQ,MAAM,QAAQ,GAAG,IAAI,MAAM,QAAQ,IAAI,IAAI,MAAM,QAAQ,MAAM,IAAI,MAAM;AAAA,IACvG;AAAA,EAAM;AACR,MAAI,WAAW,OAAO,MAAM,QAAQ,MAAM;AAG1C,MAAI,UAAU,OAAO,MAAM,QAAQ,MAAM;AAEzC,MAAI,MAAM;AAAA,IACR;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACD,SAAO;AACT;AAEO,SAAS,QAAQ,GAAG;AACzB,SAAO,IAAI,KAAM,MAAM,IAAK;AAC9B;;"}